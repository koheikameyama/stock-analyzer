# Google AdSense 自動広告 設定ガイド

このドキュメントでは、Google AdSense自動広告の設定方法を説明します。

## 🎯 自動広告とは

Googleが自動的に最適な位置に広告を配置してくれる機能です。
- 手動で広告ユニットを配置する必要がない
- AIが最適な位置・サイズ・タイミングで広告を表示
- 審査コードを設置するだけでOK

## 📋 設定手順

### 1. AdSenseアカウント作成

1. [Google AdSense](https://www.google.com/adsense/)にアクセス
2. 「ご利用開始」をクリック
3. Googleアカウントでログイン
4. サイト情報を入力
   - サイトURL: `https://stock-analyzer.jp`
   - サイトの言語: 日本語

### 2. 審査申請

1. AdSense管理画面にログイン
2. 「サイトを追加」から審査申請
3. 審査コードが表示される（例: `ca-pub-1234567890123456`）

### 3. 審査コードの設置

#### 環境変数に設定

`.env.local`に以下を追加：

```env
NEXT_PUBLIC_ADSENSE_ID="ca-pub-1234567890123456"
```

#### 本番環境（Railway）に設定

```bash
railway variables set NEXT_PUBLIC_ADSENSE_ID="ca-pub-1234567890123456"
```

または、Railway Dashboardから：
1. プロジェクトを開く
2. Variables タブを開く
3. `NEXT_PUBLIC_ADSENSE_ID` を追加

### 4. デプロイ

環境変数を設定したら、デプロイを実行：

```bash
git push origin develop
```

### 5. 審査完了を待つ

- 通常1-2週間で審査結果が通知される
- 審査中もコードは設置したままにしておく
- 審査に通ると自動的に広告が表示される

## 🔍 審査に通るためのチェックリスト

### 必須要件
- [x] オリジナルコンテンツがある
- [x] プライバシーポリシーがある
- [x] 利用規約がある
- [x] お問い合わせフォームがある
- [x] サイトが正常に動作している
- [x] HTTPSで配信されている

### 推奨事項
- [ ] コンテンツ量を増やす（記事を追加）
- [ ] 定期的に更新する
- [ ] ユーザーにとって有益な情報を提供
- [ ] サイトの読み込み速度を改善

## 💡 自動広告の設定（審査通過後）

審査通過後、AdSense管理画面で自動広告の設定ができます：

1. AdSense管理画面にログイン
2. 「広告」→「自動広告」を開く
3. サイトを選択
4. 広告フォーマットを選択：
   - ✅ テキスト広告とディスプレイ広告
   - ✅ インフィード広告（おすすめ）
   - ✅ 記事内広告（おすすめ）
   - ❌ Multiplex広告（関連コンテンツ - PV数が必要）
   - ❌ アンカー広告（ユーザー体験を損なう可能性）
   - ❌ モバイル全画面広告（ユーザー体験を損なう可能性）

## 📊 収益の確認

AdSense管理画面の「レポート」から収益を確認できます：
- 見積もり収益額
- ページビュー数
- クリック数
- クリック率（CTR）
- ページRPM（1000回表示あたりの収益）

## ⚠️ 注意事項

### 禁止事項
- ❌ 自分で広告をクリックする
- ❌ 他人に広告クリックを依頼する
- ❌ 広告の近くに誤クリックを誘発する要素を配置
- ❌ 違法コンテンツ・アダルトコンテンツ

### ポリシー違反に注意
- 投資助言行為に該当する表現を避ける
- 「必ず儲かる」「確実」などの断定的表現を避ける
- 免責事項を明確に表示

## 🔧 トラブルシューティング

### 広告が表示されない

1. **環境変数が正しく設定されているか確認**
   ```bash
   # ローカル
   echo $NEXT_PUBLIC_ADSENSE_ID

   # Railway
   railway variables get NEXT_PUBLIC_ADSENSE_ID
   ```

2. **ブラウザのコンソールでエラーを確認**
   - F12で開発者ツールを開く
   - Consoleタブでエラーを確認

3. **広告ブロッカーを無効にする**
   - AdBlockなどの拡張機能を一時的に無効化

4. **審査状況を確認**
   - AdSense管理画面で審査状況を確認
   - 審査中は広告が表示されない

### 審査に落ちた場合

- 不承認の理由を確認
- 問題を修正
- 再申請（通常1ヶ月後に可能）

## 📚 参考リンク

- [Google AdSense ヘルプ](https://support.google.com/adsense/)
- [自動広告について](https://support.google.com/adsense/answer/9261805?hl=ja)
- [AdSenseポリシー](https://support.google.com/adsense/answer/48182)
